<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Subscription Confirmed | ZNews</title>

    <link rel="stylesheet" href="/fonts/material_icons/material_icons.css">
    <link rel="stylesheet" href="/css/materialize.min.css">

    <link rel="stylesheet" href="/css/main.css">

</head>
<body>

<div class="background">
    <div class="container foreground">

        <!-- Main Logo/Title -->
        <div class="big row">
            <div class="col s12 center-align">
                <img src="/img/logo.jpg" alt="ZNEWS"/>
            </div>
        </div>

        <div class="row">

            <div class="col s12">

                <div class="row">
                    <div class="col s12">
                        <h4 class="red-text text-lighten-1 article-headline">Subscription Confirmed</h4>
                    </div>
                </div>

                <div class="row">
                    <div class="col s12">
                        <p class="flow-text">
                            You subscription to ZNews has been confirmed.
                            Use the buttons below to return to the main page or edit your subscription.
                        </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col s12">
                        <a class="btn waves-effect waves-light" href="/">Go to main page</a>
                        <a class="btn waves-effect waves-light" id="edit-sub-btn">Edit subscription</a>
                    </div>
                </div>

            </div>

        </div>

    </div>
</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>
<script src="/js/main-aesthetics.js"></script>

<script>
    // TODO: Duplicate code
    function getQueryParamByName(name, url = window.location.href)
    {
        name = name.replace(/[\[\]]/g, "\\$&");
        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results)
            return null;
        if (!results[2])
            return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    jQuery(function($)
    {
        let email = getQueryParamByName('email');
        $('#edit-sub-btn').attr('href', `/edit_subscription${email ? '?email=' + email : ''}`);
    });
</script>

</body>
</html>
